{%- style -%}
      header {
        max-height:{{ section.settings.header_height }}px;
        margin-bottom: {{ section.settings.margin_bottom }}px;
        display: flex;
        align-items: center;
      }
      .search_bar_main .search_inner{
        box-shadow: 1px 15px 20px #cccccc30;
      }
      .bg-header{
        background-color:{{ section.settings.header_bg }};
      }
      .mega_menu_bg{
        background-color:{{ section.settings.mega_menu_bg }};
      }

      #nav_link_list::-webkit-scrollbar{
       width:0 !important;
      }

      header *:not(input){
        color: {{ section.settings.header_content_color }} !important;
      }

      header svg path{
        fill:{{ section.settings.header_content_color }} !important;
      }

      .icon path{
        fill: #000!important;
      }

      header svg.stroke path{
        fill:transparent;
        stroke: {{ section.settings.header_content_color }} !important;
      }

      .modal-body *{
      color: {{ section.settings.header_content_color }} !important;
    }

    .modal-body select,.modal-body .select{
  background-color:{{ section.settings.header_bg }} !important;
    }

    .modal-body svg path{
      fill:{{ section.settings.header_content_color }} !important;
    }
    .modal-body svg.stroke path{
      fill:none;
      stroke:{{ section.settings.header_content_color }} !important;
    }
    header .link-hover::before{
            background:{{ section.settings.header_content_color }} !important;
          }

      @media screen and (min-width: 1280px){
              .nav-main{
                margin: -{{ section.settings.padding_top }}px 0 -{{ section.settings.padding_bottom }}px;
              }
              #nav_link_list .menu-item{
                padding-block: {{ section.settings.link_padding }}px;
                padding-inline: {{ section.settings.link_padding | divided_by: 2 }}px;
              }
            }

            @media screen and (max-width: 1520px){
              header .container{
                max-width:100% !important;
              }
            }

            @media screen and (max-width: 1200px){
              header.hamburger-active:before{
                content:'';
                background-color:{{ section.settings.header_bg }};
                height:50px;
                width:100%;
                position:fixed;
                left:0;
                top:0;
                z-index:239;
              }
              #nav_link_list{
                padding-top:{{ section.settings.header_height }}px;
              }
              header.hamburger-active #nav_mobile{
                display:flex !important;
              }
              header.hamburger-active #nav_mobile_top{
                width:100% !important;
                opacity:1 !important;
                pointer-events:auto !important;
              }
              header.hamburger-active .nav-logo,header.hamburger-active .nav-btn-group{
                position:fixed !important;
                top:10px;
              }
              header.hamburger-active .nav-logo{
                left:15px;
              }
              header.hamburger-active .nav-btn-group{
                right:15px;
              }
              .menu-item > a > .dropdown-icon:not(.mobile-icon){
                display:none !important;
              }
              .sub-menu{
                opacity:1 !important;
                pointer-events:auto !important;
              }
              .sub-menu .bg-header{
                background-color:#00000010;
              }
              .nav-main{
                background-color:#E4E1DF;
              }
              .nav-main *:not(input){
        color: #403B3A !important;
      }

      .nav-main svg path{
        fill:#403B3A !important;
      }
      .nav-main svg.stroke path{
        fill:transparent !important;
        stroke: #403B3A !important;
      }
      header .link-hover::before{
            display:none;
          }
            }

    .link-hover::before {
    content: '';
    display: block;
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0%;
    height: 1px;
    background: var(--global-font-color)!important;
    transition: 0.3s ease;
    }
    .link-hover:hover::before {
      width: 100%;
    }
{%- endstyle -%}

<header
  class="w-full relative duration-150 ease-in-out {% if section.settings.sticky_header == true %}sticky-header{% endif %} z-[899]"
  id="header_main"
  style="background-color:{{ section.settings.header_bg }};"
>
  <nav class="{% if settings.container == 'boxed' %}container{% else %}container-fluid{% endif %} mx-auto h-full flex justify-between items-center !py-[10px] lg:!py-0">
    <div class="nav-logo flex align-middle justify-start items-center z-[299] relative">
      <h1>
        <a
          href="{{ routes.root_url }}"
          rel="nofollow"
          class="text-[1.2rem] sm:text-[1.54rem] flex items-center xl:max-w-full max-w-[120px]"
          style="{%- if settings.logo_header != blank -%}width:{{ settings.logo_width }}px;{% endif %}"
        >
          {%- if settings.logo_header != blank -%}
            {%- assign logo_alt = settings.logo_header.alt | default: shop.name | escape -%}

            {{
              settings.logo_header
              | image_url: width: 500
              | image_tag:
                class: '',
                widths: '50, 100, 150, 200, 250, 300, 400, 500',
                height: 100,
                width: settings.logo_width,
                alt: logo_alt
            }}
            <span class="!text-[0px] aria-label">
              {{ shop.name }}
            </span>
          {% else %}
            {{ shop.name }}
          {% endif %}
        </a>
      </h1>
    </div>
    <div
      class="nav-main w-full xl:bg-transparent xl:mt-[0] xl:w-[90%] 2xl:w-[80%] hidden fixed h-screen flex-col xl:flex-row xl:h-auto top-0 left-0 xl:left-auto xl:top-auto xl:relative xl:flex items-center justify-start xl:justify-between z-[99]"
      id="nav_mobile"
      x-data="{mobileMenuOpen: false, searchBarOpen: false}"
    >
      <div
        class="w-full xl:w-[70%] align-middle justify-center z-[99] flex h-[90%] xl:h-full border-b xl:pt-0 xl:border-b-0 overflow-auto xl:overflow-visible"
        id="nav_link_list"
      >
        <nav class="w-full xl:w-auto">
          <ul class="flex items-start xl:items-center h-full flex-col xl:flex-row">
            <li class="flex xl:hidden p-[20px]">
              <span class="flex items-center cursor-pointer currency_btn">
                {{- localization.country | image_url: width: 16 | image_tag }}&nbsp;
                {{- localization.country.currency.iso_code }}/{{ localization.language.iso_code | upcase -}}
                &nbsp;
                {% render 'icon-arrow-down', class: 'w-[12px] h-[12px] ease-in-out duration-200' %}
              </span>
            </li>
            {% for link in linklists['main-menu'].links limit: 8 %}
              <li
                class="menu-item h-auto xl:h-full w-full xl:w-auto py-5 px-5 items-start xl:items-center flex flex-col xl:flex-row relative group/item xl:hover:bg-transparent bg-transparent duration-150 ease-in-out"
                data-menu="{{ forloop.index | minus: 1 }}"
              >
                <div class="flex items-center justify-between w-full gap-[15px]">
                  {% if forloop.index == 1 %}
                    {% if section.settings.link_icon_1 != blank %}
                      {{
                        section.settings.link_icon_1
                        | image_url: width: 100
                        | image_tag: class: 'h-[24px] w-[24px] object-contain xl:hidden'
                      }}
                    {% endif %}
                  {% elsif forloop.index == 2 %}
                    {% if section.settings.link_icon_2 != blank %}
                      {{
                        section.settings.link_icon_2
                        | image_url: width: 100
                        | image_tag: class: 'h-[24px] w-[24px] object-contain xl:hidden'
                      }}
                    {% endif %}
                  {% elsif forloop.index == 3 %}
                    {% if section.settings.link_icon_3 != blank %}
                      {{
                        section.settings.link_icon_3
                        | image_url: width: 100
                        | image_tag: class: 'h-[24px] w-[24px] object-contain xl:hidden'
                      }}
                    {% endif %}
                  {% elsif forloop.index == 4 %}
                    {% if section.settings.link_icon_4 != blank %}
                      {{
                        section.settings.link_icon_4
                        | image_url: width: 100
                        | image_tag: class: 'h-[24px] w-[24px] object-contain xl:hidden'
                      }}
                    {% endif %}
                  {% elsif forloop.index == 5 %}
                    {% if section.settings.link_icon_5 != blank %}
                      {{
                        section.settings.link_icon_5
                        | image_url: width: 100
                        | image_tag: class: 'h-[24px] w-[24px] object-contain xl:hidden'
                      }}
                    {% endif %}
                  {% elsif forloop.index == 6 %}
                    {% if section.settings.link_icon_6 != blank %}
                      {{
                        section.settings.link_icon_6
                        | image_url: width: 100
                        | image_tag: class: 'h-[24px] w-[24px] object-contain xl:hidden'
                      }}
                    {% endif %}
                  {% elsif forloop.index == 7 %}
                    {% if section.settings.link_icon_7 != blank %}
                      {{
                        section.settings.link_icon_7
                        | image_url: width: 100
                        | image_tag: class: 'h-[24px] w-[24px] object-contain xl:hidden'
                      }}
                    {% endif %}
                  {% elsif forloop.index == 8 %}
                    {% if section.settings.link_icon_8 != blank %}
                      {{
                        section.settings.link_icon_8
                        | image_url: width: 100
                        | image_tag: class: 'h-[24px] w-[24px] object-contain xl:hidden'
                      }}
                    {% endif %}
                  {% endif %}
                  <a
                    rel="nofollow"
                    href="{{ link.url }}"
                    class="menu-link link-hover flex items-center gap-2 w-full justify-between xl:justify-start xl:w-auto hover:opacity-60 opacity-100 duration-150 ease-in-out"
                    aria-controls="{{ link.handle }}-id"
                  >
                    {{- link.title -}}

                    <span class="w-1/2 xl:w-auto {% if link.links != blank -%}flex{% else %}hidden{%- endif %} dropdown-icon h-[25px] relative z-[99] items-center revert_btn">
                      {%- render 'icon-arrow-down', class: 'w-[12px] h-[12px] ml-auto xl:ml-0 ' -%}
                    </span>
                  </a>
                </div>
                {% if link.links != blank %}
                  <ul
                    class="sub-menu hidden xl:group-hover/item:block xl:hover:block relative xl:absolute top-auto xl:top-full z-50 left-0 w-full xl:w-auto mt-[20px] xl:mt-0"
                    id="{{ link.handle }}-id"
                  >
                    {% for child_link in link.links %}
                      <li class="bg-header p-[15px] xl:p-0 relative min-w-full max-w-full xl:min-w-[150px] xl:max-w-[300px] flex flex-col gap-[10px] group/submenu">
                        <a
                          rel="nofollow"
                          href="{{ child_link.url }}"
                          class="sub-link p-0 xl:px-5 xl:py-2 xl:hover:opacity-80 ease-in-out duration-150 whitespace-nowrap flex items-center justify-between"
                          aria-controls="{{ child_link.handle }}-id"
                        >
                          {{- child_link.title -}}
                          {%- if child_link.links != blank -%}
                            <span class="w-1/2 xl:w-auto dropdown-icon h-[25px] flex items-center xl:h-auto relative z-[99] mobile-icon">
                              {% render 'icon-arrow-down',
                                class: 'w-[12px] h-[12px] rotate-0 xl:-rotate-90 ml-auto xl:ml-0'
                              %}
                            </span>
                          {% endif %}
                        </a>
                        {% if child_link.links != blank %}
                          <ul
                            class="sub-menu2 relative xl:absolute xl:left-full xl:top-0 hidden xl:hover:block xl:group-hover/submenu:block mt-[10px] xl:mt-0"
                            id="{{ child_link.handle }}-id"
                          >
                            {% for grandchild_link in child_link.links %}
                              <li class="bg-header relative min-w-full max-w-full xl:min-w-[150px] xl:max-w-[300px] flex flex-col gap-[10px]">
                                <a
                                  rel="nofollow"
                                  href="{{ grandchild_link.url }}"
                                  class="px-5 py-2 border-b-[#ccc] whitespace-nowrap hover:bg-transparent xl:hover:opacity-80 ease-in-out duration-150"
                                >
                                  {{- grandchild_link.title -}}
                                </a>
                              </li>
                            {% endfor %}
                          </ul>
                        {% endif %}
                      </li>
                    {% endfor %}
                  </ul>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        </nav>
      </div>
      <div class="xl:w-[30%] justify-center xl:justify-end items-center hidden xl:flex p-[20px] xl:p-0">
        <ul class="flex justify-center align-middle items-center gap-[30px]">
          <li>
            <button
              type="button"
              class="flex items-center cursor-pointer currency_btn dropdown_aria"
              aria-controls="currency_modal"
              aria-label="Currency Switcher"
            >
              {{- localization.country | image_url: width: 16 | image_tag }}&nbsp;
              {{- localization.country.currency.iso_code }}/{{ localization.language.iso_code | upcase -}}
              &nbsp;
              {% render 'icon-arrow-down', class: 'w-[12px] h-[12px] ease-in-out duration-200 ' %}
            </button>
          </li>
          <li>
            <button class="h-fit flex items-center search-icon !text-[0px] dropdown_aria" aria-controls="search-bar">
              Search
              {% render 'icon-search', class: 'hover:opacity-70 ease-in-out duration-150 w-[20px] h-[20px] stroke' %}
            </button>
          </li>
          {%- if shop.customer_accounts_enabled -%}
            {%- if customer -%}
              <li class="flex items-center gap-[10px]">
                <a rel="nofollow" href="{{ routes.account_url }}" title="Account Page" aria-label="Account Page">
                  {{- customer.first_name -}}
                </a>
                <a
                  href="/account/logout/"
                  class="logout hover:scale-90 ease-in-out duration-150"
                  title="Logout"
                  aria-label="Logout"
                >
                  {%- render 'icon-logout', class: 'w-[20px] h-[20px] stroke' -%}
                </a>
              </li>
            {%- else -%}
              <li>
                <a
                  rel="nofollow"
                  aria-label="Account Page"
                  href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}"
                >
                  {% render 'accounts-icon',
                    class: 'hover:opacity-70 ease-in-out duration-150 w-[20px] h-[20px] stroke'
                  %}
                </a>
              </li>
            {%- endif -%}
          {%- endif -%}
          {% if template.name != 'cart' %}
            <li class="relative">
              {% if cart.empty? == false %}
                <span
                  class="cart-icon-status rounded-full theme-bg text-white absolute right-[-1px] top-[-1px] z-50 h-[10px] w-[10px] pointer-events-none"
                >
                </span>
              {% endif %}
              {% if settings.cart_type == 'page' %}
                <a href="{{ routes.cart_url }}" rel="nofollow" class="!text-[0px] flex items-center z-20">
                  {% render 'icon-cart', class: 'hover:opacity-70 ease-in-out duration-150 w-[20px] h-[20px] stroke' %}
                  Cart
                </a>
              {% elsif settings.cart_type == 'drawer' %}
                <button
                  type="button"
                  class="cart_drawer_btn !text-[0px] flex items-center dropdown_aria z-20"
                  aria-controls="cartDrawer"
                >
                  {% render 'icon-cart', class: 'hover:opacity-70 ease-in-out duration-150 w-[20px] h-[20px] stroke' -%}
                  Cart
                </button>
              {% endif %}
            </li>
          {% endif %}
        </ul>
      </div>
      <div class="flex flex-col items-start w-full p-[20px] gap-[10px] xl:w-0 xl:hidden border-t border-[#3A3A3A]">
        <p>{{ 'header.follow_us' | t }}</p>
        <ul class="flex items-center gap-[20px]">
          {% if settings.social_instagram_link != blank %}
            <li>
              <a href="{{ settings.social_instagram_link }}" rel="nofollow">
                {%- render 'icon-instagram', class: 'w-[24px] h-[24px]' -%}
              </a>
            </li>
          {% endif %}
          {% if settings.social_facebook_link != blank %}
            <li>
              <a href="{{ settings.social_facebook_link }}" rel="nofollow">
                {%- render 'icon-facebook', class: 'w-[24px] h-[24px]' -%}
              </a>
            </li>
          {% endif %}
          {% if settings.social_youtube_link != blank %}
            <li>
              <a href="{{ settings.social_youtube_link }}" rel="nofollow">
                {%- render 'icon-youtube', class: 'w-[24px] h-[24px]' -%}
              </a>
            </li>
          {% endif %}
        </ul>
      </div>
    </div>

    <div class="nav-btn-group xl:w-[0] xl:hidden flex w-[calc(50% - 15px)] justify-end items-center z-[299] h-[30px] xl:h-auto">
      <button type="button" aria-label="Navigation Menu" class="cursor-pointer" id="nav_mobile_btn">
        {% render 'icon-menu', class: 'w-[20px] h-[20px] duration-200 ease-in-out' %}
      </button>
      <ul
        class="w-0 opacity-0 pointer-events-none flex justify-end align-middle items-center gap-[20px] duration-200 ease-in-out"
        id="nav_mobile_top"
      >
        {%- if shop.customer_accounts_enabled -%}
          {%- if customer -%}
            <li class="flex items-center gap-[10px]">
              <a rel="nofollow" href="{{ routes.account_url }}" title="Account Page">
                <span class="lg:block hidden">{{ customer.first_name }}</span>
                {% render 'accounts-icon',
                  class: 'lg:hidden block hover:opacity-70 ease-in-out duration-150 w-[20px] h-[20px] stroke'
                %}
              </a>
              <a
                href="/account/logout/"
                rel="nofollow"
                class="logout hover:scale-90 ease-in-out duration-150 lg:block hidden"
                title="Logout"
                aria-label="Logout"
              >
                {%- render 'icon-logout', class: 'w-[20px] h-[20px] stroke' -%}
              </a>
            </li>
          {%- else -%}
            <li>
              <a
                rel="nofollow"
                href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}"
                aria-label="Account Page"
              >
                {% render 'accounts-icon',
                  class: 'hover:opacity-70 ease-in-out duration-150 w-[20px] h-[20px] stroke'
                %}
              </a>
            </li>
          {%- endif -%}
        {%- endif -%}
        <li>
          <button class="h-fit flex items-center search-icon dropdown_aria" aria-controls="search-bar">
            {% render 'icon-search', class: 'hover:opacity-70 ease-in-out duration-150 w-[20px] h-[20px] stroke' %}
          </button>
        </li>
        {% if template.name != 'cart' %}
          <li class="relative">
            {% if cart.empty? == false %}
              <span
                class="cart-icon-status rounded-full theme-bg text-white absolute right-[-5px] top-[-5px] z-50 h-[10px] w-[10px]"
              >
              </span>
            {% endif %}
            {% if settings.cart_type == 'page' %}
              <a href="{{ routes.cart_url }}" rel="nofollow">
                {% render 'icon-cart', class: 'hover:opacity-70 ease-in-out duration-150 w-[20px] h-[20px] stroke' %}
              </a>
            {% elsif settings.cart_type == 'drawer' %}
              <a href="#" class="cart_drawer_btn" rel="nofollow">
                {% render 'icon-cart', class: 'hover:opacity-70 ease-in-out duration-150 w-[20px] h-[20px] stroke' -%}
              </a>
            {% endif %}
          </li>
        {% endif %}
        <li>
          <div
            class="xl:hidden flex justify-center items-center cursor-pointer ease-in-out duration-150 relative"
            id="nav_close"
          >
            {% render 'icon-close', class: 'w-[20px] h-[20px] duration-200 ease-in-out scale-0', fill: '{{ settings.color_body_text }}' %}
          </div>
        </li>
      </ul>
    </div>
  </nav>

  {% render 'mega-menu-main', section: section %}
  {% render 'search-bar', section: section %}
  {% render 'currency-modal', section: section %}
</header>

{% schema %}
{
  "name": "t:section.header.name",
  "class": "header",
  "settings": [
    {
      "type": "range",
      "id": "header_height",
      "min": 70,
      "max": 130,
      "step": 5,
      "unit": "px",
      "label": "t:section.header.settings.header_height",
      "default": 80
    },
    {
      "type": "range",
      "id": "link_padding",
      "max": 80,
      "min": 10,
      "step": 10,
      "default": 40,
      "label": "t:section.header.settings.link_padding",
      "unit": "px"
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "px",
      "label": "t:section.header.settings.margin_bottom",
      "default": 0
    },
    {
      "type": "checkbox",
      "id": "sticky_header",
      "default": false,
      "label": "t:section.header.settings.sticky_header"
    },
    {
      "type": "color",
      "id": "header_bg",
      "default": "#3A3A3A",
      "label": "t:section.header.settings.header_bg"
    },
    {
      "type": "color",
      "id": "header_content_color",
      "default": "#fff",
      "label": "t:section.header.settings.header_content_color"
    },
    {
      "type": "color",
      "id": "mega_menu_bg",
      "default": "#F2EFEB",
      "label": "t:section.header.settings.mega_menu_bg"
    },
    {
      "type": "header",
      "content": "t:section.header.settings.headers.responsive_icons"
    },
    {
      "type": "image_picker",
      "id": "link_icon_1",
      "label": "t:section.header.settings.link_icon_1.label",
      "info": "t:section.header.settings.link_icon_1.info"
    },
    {
      "type": "image_picker",
      "id": "link_icon_2",
      "label": "t:section.header.settings.link_icon_2.label",
      "info": "t:section.header.settings.link_icon_2.info"
    },
    {
      "type": "image_picker",
      "id": "link_icon_3",
      "label": "t:section.header.settings.link_icon_3.label",
      "info": "t:section.header.settings.link_icon_3.info"
    },
    {
      "type": "image_picker",
      "id": "link_icon_4",
      "label": "t:section.header.settings.link_icon_4.label",
      "info": "t:section.header.settings.link_icon_4.info"
    },
    {
      "type": "image_picker",
      "id": "link_icon_5",
      "label": "t:section.header.settings.link_icon_5.label",
      "info": "t:section.header.settings.link_icon_5.info"
    },
    {
      "type": "image_picker",
      "id": "link_icon_6",
      "label": "t:section.header.settings.link_icon_6.label",
      "info": "t:section.header.settings.link_icon_6.info"
    },
    {
      "type": "image_picker",
      "id": "link_icon_7",
      "label": "t:section.header.settings.link_icon_7.label",
      "info": "t:section.header.settings.link_icon_7.info"
    }
  ],
  "blocks": [
    {
      "type": "mega-item",
      "name": "t:section.header.blocks.mega-item.name",
      "limit": 8,
      "settings": [
        {
          "type": "select",
          "id": "menu_index",
          "label": "t:section.header.blocks.mega-item.settings.menu_index.label",
          "default": "1",
          "options": [
            {
              "label": "t:section.header.blocks.mega-item.settings.menu_index.options.first",
              "value": "0"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.menu_index.options.second",
              "value": "1"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.menu_index.options.third",
              "value": "2"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.menu_index.options.fourth",
              "value": "3"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.menu_index.options.fifth",
              "value": "4"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.menu_index.options.sixth",
              "value": "5"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.menu_index.options.seventh",
              "value": "6"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.menu_index.options.eight",
              "value": "7"
            }
          ]
        },
        {
          "type": "select",
          "id": "mega_left",
          "default": "default",
          "label": "t:section.header.blocks.mega-item.settings.mega_left.label",
          "info": "t:section.header.blocks.mega-item.settings.mega_left.info",
          "options": [
            {
              "label": "t:section.header.blocks.mega-item.settings.mega_left.options.navigation",
              "value": "default"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.mega_left.options.menu",
              "value": "menu_select"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.mega_left.options.collection",
              "value": "collection_list"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.mega_left.options.contact",
              "value": "contact_info"
            }
          ]
        },
        {
          "type": "select",
          "id": "mega_right",
          "default": "products",
          "label": "t:section.header.blocks.mega-item.settings.mega_right.label",
          "info": "t:section.header.blocks.mega-item.settings.mega_left.info",
          "options": [
            {
              "label": "t:section.header.blocks.mega-item.settings.mega_right.options.slider",
              "value": "products"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.mega_right.options.article",
              "value": "article"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.mega_right.options.banner",
              "value": "right_banner"
            }
          ]
        },
        {
          "type": "header",
          "content": "t:section.header.blocks.mega-item.settings.mega_menu_left.content"
        },
        {
          "type": "text",
          "id": "left_title",
          "label": "t:section.header.blocks.mega-item.settings.left_title.label",
          "placeholder": "t:section.header.blocks.mega-item.settings.left_title.placeholder",
          "default": "Support"
        },
        {
          "type": "link_list",
          "id": "featured_menu",
          "label": "t:section.header.blocks.mega-item.settings.featured_menu.label",
          "info": "t:section.header.blocks.mega-item.settings.featured_menu.info"
        },
        {
          "type": "collection_list",
          "id": "featured_collections",
          "label": "t:section.header.blocks.mega-item.settings.featured_collections.label",
          "limit": 8,
          "info": "t:section.header.blocks.mega-item.settings.featured_collections.info"
        },
        {
          "type": "header",
          "content": "t:section.header.blocks.mega-item.settings.mega_menu_right.content"
        },
        {
          "type": "text",
          "id": "right_title",
          "label": "Right Panel Title",
          "default": "Trending News"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:section.header.blocks.mega-item.settings.image.label",
          "info": "t:section.header.blocks.mega-item.settings.image.info"
        },
        {
          "type": "collection",
          "id": "products_slider",
          "label": "t:section.header.blocks.mega-item.settings.products_slider.label",
          "info": "t:section.header.blocks.mega-item.settings.products_slider.info"
        },
        {
          "type": "article",
          "id": "featured_article",
          "label": "t:section.header.blocks.mega-item.settings.featured_article.label",
          "info": "t:section.header.blocks.mega-item.settings.featured_article.info"
        },
        {
          "type": "text",
          "id": "banner_title",
          "label": "t:section.header.blocks.mega-item.settings.banner_title.label",
          "default": "GET SERVICING AT YOUR DOOORSTEP",
          "info": "t:section.header.blocks.mega-item.settings.banner_title.info"
        },
        {
          "type": "select",
          "id": "banner_text_align",
          "default": "center",
          "label": "t:section.header.blocks.mega-item.settings.banner_text_align.label",
          "options": [
            {
              "label": "t:section.header.blocks.mega-item.settings.banner_text_align.options.left",
              "value": "left"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.banner_text_align.options.center",
              "value": "center"
            },
            {
              "label": "t:section.header.blocks.mega-item.settings.banner_text_align.options.right",
              "value": "right"
            }
          ]
        },
        {
          "type": "text",
          "id": "banner_button_text",
          "label": "t:section.header.blocks.mega-item.settings.banner_button_text.label",
          "default": "Contact Us",
          "info": "t:section.header.blocks.mega-item.settings.banner_button_text.info"
        },
        {
          "type": "url",
          "id": "banner_button_url",
          "label": "t:section.header.blocks.mega-item.settings.banner_button_url.label",
          "info": "t:section.header.blocks.mega-item.settings.banner_button_url.info"
        }
      ]
    }
  ]
}
{% endschema %}

{% javascript %}
  // Sticky Nav
  let headerDiv = document.querySelector('header#header_main');

  if (headerDiv.classList.contains('sticky-header')) {
    window.addEventListener('scroll', (e) => {
      if (window.pageYOffset > headerDiv.offsetTop) {
        headerDiv.classList.add('sticky-active');
      } else {
        headerDiv.classList.remove('sticky-active');
      }
    });
  }

  // Hamburger Menu

  let hamburgerBtn = document.querySelector('#nav_mobile_btn svg');
  let hamburgerClose = document.querySelector('#nav_close svg');
  let navMobile = document.querySelector('#nav_mobile');
  let header = document.querySelector('header');
  hamburgerBtn.addEventListener('click', (e) => {
    header.classList.add('hamburger-active');
    hamburgerBtn.classList.add('scale-0');
    hamburgerClose.classList.remove('scale-0');
  });
  hamburgerClose.addEventListener('click', (e) => {
    header.classList.remove('hamburger-active');
    hamburgerBtn.classList.remove('scale-0');
    hamburgerClose.classList.add('scale-0');
  });

  let menuItem = navMobile.querySelectorAll('.menu-item');
  menuItem.forEach((item) => {
    let subMenu = item.querySelector('.sub-menu');
    let icon = item.querySelector('.menu-link .dropdown-icon');
    if (subMenu) {
      icon.addEventListener('click', (e) => {
        e.preventDefault();
        subMenu.classList.toggle('hidden');
      });
    }
    if (subMenu) {
      subMenu.querySelectorAll('li').forEach((subItem) => {
        let subIcon = subItem.querySelector('.dropdown-icon');
        if (subIcon) {
          subIcon.addEventListener('click', (subEvent) => {
            subEvent.preventDefault();
            console.log('SubItem Clicked!!');
            subItem.querySelector('.sub-menu2').classList.toggle('hidden');
          });
        }
      });
    }
  });

  // Close Hamburger

  // Currency Modal

  let currencyBtn = document.querySelectorAll('.currency_btn');

  if (currencyBtn) {
    let currencyModal = document.querySelector('#currency_modal');
    let currencyClose = document.querySelector('#currency_close');
    currencyBtn.forEach((btn) => {
      btn.addEventListener('click', (e) => {
        currencyModal.classList.toggle('scale-y-0');
        header.classList.remove('hamburger-active');
        btn.querySelector('svg').classList.toggle('rotate-180');
      });

      currencyClose.addEventListener('click', (e) => {
        btn.querySelector('svg').classList.remove('rotate-180');
      });
    });
    currencyClose.addEventListener('click', (e) => {
      header.classList.add('hamburger-active');
      currencyModal.classList.remove('scale-y-100');
      currencyModal.classList.add('scale-y-0');
    });
    window.addEventListener('keyup', (e) => {
      if (e.key === 'Escape') {
        header.classList.add('hamburger-active');
        currencyModal.classList.remove('scale-y-100');
        currencyModal.classList.add('scale-y-0');
      }
    });
  }

  // --------- Mega Menu

  function megaTabStatus(status, el) {
    let children = el.querySelectorAll('a,button');
    if (status == 'true') {
      children.forEach((child) => {
        child.setAttribute('tabindex', '-1');
      });
    } else {
      children.forEach((child) => {
        child.setAttribute('tabindex', '0');
      });
    }
  }

  let megaIndex = document.querySelectorAll('[data-mega]');
  let menuIndex = document.querySelectorAll(`[data-menu]`);

  if (megaIndex) {
    megaIndex.forEach((item) => {
      megaTabStatus('true', item);
      let indexOfMega = item.getAttribute('data-mega');
      let menuItem = document.querySelector(`[data-menu="${indexOfMega}"]`);
      if (menuItem) {
        let menuIcon = menuItem.querySelector('.dropdown-icon');
        let menuLink = menuItem.querySelector('.menu-link');
        let subMenu = menuItem.querySelector('.sub-menu');
        if (subMenu) {
          subMenu.classList.add('opacity-0');
          subMenu.classList.add('pointer-events-none');
          menuIcon.classList.add('mobile-icon');
        }
        menuIcon.classList.remove('hidden');
        menuIcon.classList.add('flex');
        menuLink.setAttribute('aria-controls', `${indexOfMega}-mega-item`);
        menuItem.addEventListener('mouseenter', (e) => {
          menuLink.setAttribute('aria-expanded', 'true');
          item.classList.remove(`scale-y-0`);
          item.classList.remove(`opacity-0`);
          menuIcon.classList.add('rotate-icon');
        });
        menuItem.addEventListener('mouseleave', (e) => {
          menuLink.setAttribute('aria-expanded', 'false');
          item.classList.add(`scale-y-0`);
          item.classList.add(`opacity-0`);
          menuIcon.classList.remove('rotate-icon');
        });
        item.addEventListener('mouseenter', (e) => {
          menuIcon.classList.add('rotate-icon');
        });
        item.addEventListener('mouseleave', (e) => {
          menuIcon.classList.remove('rotate-icon');
        });
        menuLink.addEventListener('keyup', (e) => {
          if (e.key === 'ArrowDown') {
            menuLink.setAttribute('aria-expanded', 'true');
            item.classList.remove(`scale-y-0`);
            item.classList.remove(`opacity-0`);
            megaTabStatus('false', item);
          } else if (e.key === 'ArrowUp') {
            menuLink.setAttribute('aria-expanded', 'false');
            item.classList.add(`scale-y-0`);
            item.classList.add(`opacity-0`);
            megaTabStatus('true', item);
          }
        });
      }
    });
  }

  let clickItems = document.querySelectorAll('.menu-link');

  if (clickItems) {
    clickItems.forEach((item) => {
      let subMenu = item.parentElement.querySelector('.sub-menu');

      if (item.hasAttribute('aria-controls') && !item.getAttribute('aria-controls').includes('mega')) {
        item.addEventListener('keyup', (e) => {
          if (e.key === 'ArrowDown') {
            subMenu.style.display = 'block';
            item.setAttribute('aria-expanded', 'true');
          } else if (e.key === 'ArrowUp') {
            subMenu.style.display = 'none';
            item.setAttribute('aria-expanded', 'false');
          }
        });
      }
    });
    let subLinks = document.querySelectorAll('.sub-menu .sub-link');

    if (subLinks) {
      subLinks.forEach((subLink) => {
        let subMenu2 = subLink.parentElement.querySelector('.sub-menu2');
        subLink.addEventListener('keyup', (e) => {
          if (e.key === 'ArrowDown') {
            subMenu2.style.display = 'block';
            subLink.setAttribute('aria-expanded', 'true');
          } else if (e.key === 'ArrowUp') {
            subMenu2.style.display = 'none';
            subLink.setAttribute('aria-expanded', 'false');
          }
        });
      });
    }
  }

  // Mega Links Open

  let menuItems = document.querySelectorAll('.mega-left .menu-item');
  if (menuItems) {
    menuItems.forEach((item) => {
      if (item.querySelector('.sub-menu')) {
        item.querySelector('.menu-link').addEventListener('click', (e) => {
          e.preventDefault();
          item.querySelector('.sub-menu').classList.remove('scale-x-0');
        });
        if (item.querySelector('.sub-menu2')) {
          let subMenuItem = item.querySelector('.sub-menu li');
          subMenuItem.addEventListener('click', (e) => {
            e.preventDefault();
            subMenuItem.querySelector('.sub-menu2').classList.remove('scale-x-0');
          });
        }
        item.querySelectorAll('.back').forEach((backBtn) => {
          backBtn.addEventListener('click', (e) => {
            item.querySelector('.sub-menu').classList.add('scale-x-0');
            if (item.querySelector('.sub-menu2')) {
              item.querySelector('.sub-menu2').classList.add('scale-x-0');
            }
          });
        });
      }
    });
  }
  if (document.querySelector('#megaProducts')) {
    new Swiper('#megaProducts', {
      slidesPerView: 3,
      spaceBetween: 20,
      loop: true,
      autoplay: {
        delay: 2000,
      },
      breakpoints: {
        1024: {
          slidesPerView: 2,
          spaceBetween: 20,
        },
        1366: {
          slidesPerView: 3,
          spaceBetween: 20,
        },
      },
    });
  }
{% endjavascript %}

<script defer="defer">
  // Get the search icon and search bar elements
  const searchIcon = document.querySelectorAll('.search-icon');
  const searchBar = document.getElementById('search-bar');
  const searchClose = document.getElementById('close-btn');
  const header = document.querySelector('header');

  if (searchIcon) {
    // Add a click event listener to the search icon
    searchIcon.forEach((btn) => {
      btn.addEventListener('click', () => {
        // Toggle the hidden class of the search bar
        searchBar.classList.toggle('hidden');
        header.classList.remove('hamburger-active');
        //  document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
      });
    });
    document.addEventListener('keyup', (e) => {
      if (e.key === 'Escape') {
        searchBar.classList.add('hidden');
      }
    });
  }

  if (searchClose) {
    // Add a click event listener to the search icon
    searchClose.addEventListener('click', () => {
      // Toggle the hidden class of the search bar
      searchBar.classList.toggle('hidden');
      //  document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
      header.classList.add('hamburger-active');
    });
  }
  var predictiveSearchInput = document.getElementById('searchInputField');
  var timer;

  if (predictiveSearchInput != null) {
    predictiveSearchInput.addEventListener('input', function (e) {
      console.log(predictiveSearchInput.value);

      clearTimeout(timer);

      if (predictiveSearchInput.value) {
        timer = setTimeout(fetchPredictiveSearch, 1000);
      } else {
        document.getElementById('search_results').innerHTML = '';
      }
    });
  }

  function fetchPredictiveSearch() {
    fetch(`/search/suggest.json?q=${predictiveSearchInput.value}&resources[type]=product`)
      .then((resp) => resp.json())
      .then((data) => {
        console.log(data);

        var products = data.resources.results.products;
        document.getElementById('search_results').innerHTML = '';
        products.forEach(function (product, index) {
          document.getElementById('search_results').innerHTML += `
            <div class="search-item-single">
              <a rel="nofollow" href="${product.url}">
              <img alt="${product.alt}" src="${product.image}"></a>
              <div>
                <p>${product.title}</p>
                <p>${formatMoney(product.price, '{{ shop.money_format }}')}</p>
              </div>
            </div>`;
        });
      });
  }

  let closeBtn = document.querySelector('.announcement-bar .close-btn');

  if (closeBtn) {
    closeBtn.addEventListener('click', (e) => {
      let topBar = document.querySelector('#announcement_bar');
      topBar.classList.add('hide-bar');
    });
  }
</script>
